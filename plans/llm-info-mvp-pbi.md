# プロダクトバックログアイテム: LLMゲートウェイ情報可視化CLIツール MVP

## プロダクトバックログアイテム

**タイトル**: LiteLLM互換モードによるモデル情報取得と表示機能

**ユーザーストーリー**:
開発者として、LLMゲートウェイが提供するモデルの制約事項をターミナル上で素早く確認したい、なぜならコーディング前に適切なモデル選択を行う必要があるから

**ビジネス価値**:
- 開発効率の向上：モデル選択にかかる時間を削減
- 品質保証：トークン上限などの制約を事前に把握し、エラーを未然に防止
- 標準化：チーム内でのモデル選択プロセスを統一

**BDD受け入れシナリオ**:
```gherkin
Scenario: LiteLLM互換ゲートウェイからモデル情報を取得して表示する
  Given 有効なLiteLLM互換ゲートウェイのURLとAPIキーが設定されている
  When ユーザーがllm-infoコマンドを実行する
  Then ゲートウェイからモデル情報が取得される
  And モデル名、最大トークン数、モード、入力コストが表形式で表示される

Scenario: 無効なゲートウェイURLを指定した場合
  Given 無効なゲートウェイURLが指定されている
  When ユーザーがllm-infoコマンドを実行する
  Then エラーメッセージが表示される
  And プログラムは異常終了しない

Scenario: APIキーが不足している場合
  Given APIキーが必要なゲートウェイが指定されている
  And APIキーが設定されていない
  When ユーザーがllm-infoコマンドを実行する
  Then 認証エラーを示すメッセージが表示される
```

**受け入れ基準**:
- [ ] LiteLLM互換の`/model/info`エンドポイントからモデル情報を取得できる
- [ ] 取得した情報をテーブル形式で表示できる
- [ ] コマンドライン引数でベースURLとAPIキーを指定できる
- [ ] 適切なタイムアウト処理が実装されている
- [ ] シンプルで分かりやすいエラーメッセージが表示される
- [ ] Go言語のシングルバイナリとしてビルドできる

**t_wadaスタイル テスト戦略**:
```
E2Eテスト:
- 実際のLiteLLM互換ゲートウェイに対するコマンド実行テスト
- エラーシナリオのエンドツーエンドテスト

統合テスト:
- APIクライアントとデータ処理層の連携テスト
- テーブル出力機能のテスト

単体テスト:
- HTTPリクエスト処理のテスト
- JSONパース処理のテスト
- テーブルフォーマット処理のテスト
- エラーハンドリングのテスト
```

**実装アプローチ**:
- **Outside-In**: コマンドラインインターフェースから開発を開始
- **Red-Green-Refactor**: 各機能をTDDサイクルで実装
- **リファクタリング**: コードの可読性と保守性を継続的に改善

**見積もり**: 5ストーリーポイント（1週間）

**技術的考慮事項**:
- 依存関係: Go標準ライブラリを優先し、外部ライブラリは最小限に
- テスタビリティ: 各コンポーネントを独立してテスト可能な設計
- シンプルさ: Go言語初心者でも理解できる実装
- パフォーマンス: 大量のモデル情報でも迅速に表示できること

**Definition of Done**:
- [ ] 受け入れシナリオが全て通る
- [ ] テストカバレッジが80%以上
- [ ] コードレビュー完了
- [ ] シンプルな実装になっていること
- [ ] エラーメッセージが分かりやすいこと
- [ ] READMEに基本的な使用方法が記載されていること

---

## 実装計画（MVP）

### Phase 1: 基本構造（1-2日）
- プロジェクト構造の設定
- 基本的なコマンドライン引数処理
- HTTPクライアントの基本実装

### Phase 2: API通信（2-3日）
- LiteLLM互換エンドポイントとの通信
- JSONレスポンスのパース
- 基本的なエラーハンドリング

### Phase 3: 表示機能（1-2日）
- テーブル形式での出力
- 動的な列制御
- ユーザビリティの改善

### Phase 4: テストと仕上げ（1日）
- 単体テスト・統合テストの実装
- ドキュメントの作成
- リファクタリング

---

## 技術仕様（MVP）

### コマンドラインインターフェース
```bash
llm-info --url <gateway-url> --api-key <api-key>
```

### APIエンドポイント
- GET `/model/info` (LiteLLM互換)

### 期待されるレスポンス形式
```json
{
  "models": [
    {
      "id": "gpt-4",
      "max_tokens": 8192,
      "mode": "chat",
      "input_cost": 0.00003
    }
  ]
}
```

### 出力形式
```
+----------------------+------------+--------+-------------+
|      MODEL NAME      | MAX TOKENS |  MODE  | INPUT COST  |
+----------------------+------------+--------+-------------+
| gpt-4                |       8192 | chat   |     0.00003 |
+----------------------+------------+--------+-------------+
```

### プロジェクト構造
```
llm-info/
├── cmd/
│   └── llm-info/
│       └── main.go
├── internal/
│   ├── api/
│   │   └── client.go
│   ├── model/
│   │   └── model.go
│   └── ui/
│       └── table.go
├── pkg/
│   └── config/
│       └── config.go
├── go.mod
├── go.sum
└── README.md